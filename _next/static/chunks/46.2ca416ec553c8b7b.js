(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{5657:t=>{t.exports={map_container:"Map_map_container__b5kzP",button_block:"Map_button_block__Ya31J",map:"Map_map__c_qkw",detail_section:"Map_detail_section__gOKKb",map_svg:"Map_map_svg__yLG9T",map_ui:"Map_map_ui__wfkdx"}},9046:(t,e,n)=>{"use strict";let i;n.r(e),n.d(e,{default:()=>w});var s=n(5155),r=n(2115),o=n(5657),a=n.n(o);class h{constructor(t){this.id=-1,this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,self.Touch&&t instanceof Touch?this.id=t.identifier:l(t)&&(this.id=t.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){let t=this.nativePointer.getCoalescedEvents().map(t=>new h(t));if(t.length>0)return t}return[this]}}let l=t=>"pointerId"in t,c=()=>{};class d{constructor(t,{start:e=()=>!0,move:n=c,end:i=c,rawUpdates:s=!1,avoidPointerEvents:r=!1}={}){this._element=t,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=t=>{if(l(t)&&0===t.buttons)this._excludeFromButtonsCheck.add(t.pointerId);else if(!(1&t.buttons))return;let e=new h(t);!this.currentPointers.some(t=>t.id===e.id)&&this._triggerPointerStart(e,t)&&(l(t)?((t.target&&"setPointerCapture"in t.target?t.target:this._element).setPointerCapture(t.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=t=>{for(let e of Array.from(t.changedTouches))this._triggerPointerStart(new h(e),t)},this._move=t=>{if(!("changedTouches"in t)&&(!l(t)||!this._excludeFromButtonsCheck.has(t.pointerId))&&0===t.buttons)return void this._pointerEnd(t);let e=this.currentPointers.slice(),n="changedTouches"in t?Array.from(t.changedTouches).map(t=>new h(t)):[new h(t)],i=[];for(let t of n){let e=this.currentPointers.findIndex(e=>e.id===t.id);-1!==e&&(i.push(t),this.currentPointers[e]=t)}0!==i.length&&this._moveCallback(e,i,t)},this._triggerPointerEnd=(t,e)=>{if(!("changedTouches"in e)&&1&e.buttons)return!1;let n=this.currentPointers.findIndex(e=>e.id===t.id);if(-1===n)return!1;this.currentPointers.splice(n,1),this.startPointers.splice(n,1),this._excludeFromButtonsCheck.delete(t.id);let i="mouseup"!==e.type&&"touchend"!==e.type&&"pointerup"!==e.type;return this._endCallback(t,e,i),!0},this._pointerEnd=t=>{if(this._triggerPointerEnd(new h(t),t))if(l(t)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=t=>{for(let e of Array.from(t.changedTouches))this._triggerPointerEnd(new h(e),t)},this._startCallback=e,this._moveCallback=n,this._endCallback=i,this._rawUpdates=s&&"onpointerrawupdate"in window,self.PointerEvent&&!r?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(t,e){return!!this._startCallback(t,e)&&(this.currentPointers.push(t),this.startPointers.push(t),!0)}}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}("pinch-zoom {\n  display: block;\n  overflow: hidden;\n  touch-action: none;\n  --scale: 1;\n  --x: 0;\n  --y: 0;\n}\n\npinch-zoom > * {\n  transform: translate(var(--x), var(--y)) scale(var(--scale));\n  transform-origin: 0 0;\n  will-change: transform;\n}\n");let u="min-scale";function m(t,e){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function p(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}function _(t,e){return"number"==typeof t?t:t.trimRight().endsWith("%")?e*parseFloat(t)/100:parseFloat(t)}function v(){return i||(i=document.createElementNS("http://www.w3.org/2000/svg","svg"))}function f(){return v().createSVGMatrix()}function g(){return v().createSVGPoint()}class E extends HTMLElement{constructor(){super(),this._transform=f(),new MutationObserver(()=>this._stageElChange()).observe(this,{childList:!0});let t=new d(this,{start:(e,n)=>2!==t.currentPointers.length&&!!this._positioningEl&&(n.preventDefault(),!0),move:e=>{this._onPointerMove(e,t.currentPointers)}});this.addEventListener("wheel",t=>this._onWheel(t))}static get observedAttributes(){return[u]}attributeChangedCallback(t,e,n){t===u&&this.scale<this.minScale&&this.setTransform({scale:this.minScale})}get minScale(){let t=this.getAttribute(u);if(!t)return .01;let e=parseFloat(t);return Number.isFinite(e)?Math.max(.01,e):.01}set minScale(t){this.setAttribute(u,String(t))}connectedCallback(){this._stageElChange()}get x(){return this._transform.e}get y(){return this._transform.f}get scale(){return this._transform.a}scaleTo(t,e={}){let{originX:n=0,originY:i=0}=e,{relativeTo:s="content",allowChangeEvent:r=!1}=e,o="content"===s?this._positioningEl:this;if(!o||!this._positioningEl)return void this.setTransform({scale:t,allowChangeEvent:r});let a=o.getBoundingClientRect();if(n=_(n,a.width),i=_(i,a.height),"content"===s)n+=this.x,i+=this.y;else{let t=this._positioningEl.getBoundingClientRect();n-=t.left,i-=t.top}this._applyChange({allowChangeEvent:r,originX:n,originY:i,scaleDiff:t/this.scale})}setTransform(t={}){let{scale:e=this.scale,allowChangeEvent:n=!1}=t,{x:i=this.x,y:s=this.y}=t;if(!this._positioningEl)return void this._updateTransform(e,i,s,n);let r=this.getBoundingClientRect(),o=this._positioningEl.getBoundingClientRect();if(!r.width||!r.height)return void this._updateTransform(e,i,s,n);let a=g();a.x=o.left-r.left,a.y=o.top-r.top;let h=g();h.x=o.width+a.x,h.y=o.height+a.y;let l=f().translate(i,s).scale(e).multiply(this._transform.inverse());a=a.matrixTransform(l),h=h.matrixTransform(l),a.x>r.width?i+=r.width-a.x:h.x<0&&(i+=-h.x),a.y>r.height?s+=r.height-a.y:h.y<0&&(s+=-h.y),this._updateTransform(e,i,s,n)}_updateTransform(t,e,n,i){if(!(t<this.minScale)&&(t!==this.scale||e!==this.x||n!==this.y)&&(this._transform.e=e,this._transform.f=n,this._transform.d=this._transform.a=t,this.style.setProperty("--x",this.x+"px"),this.style.setProperty("--y",this.y+"px"),this.style.setProperty("--scale",this.scale+""),i)){let t=new Event("change",{bubbles:!0});this.dispatchEvent(t)}}_stageElChange(){this._positioningEl=void 0,0!==this.children.length&&(this._positioningEl=this.children[0],this.children.length>1&&console.warn("<pinch-zoom> must not have more than one child."),this.setTransform({allowChangeEvent:!0}))}_onWheel(t){if(!this._positioningEl)return;t.preventDefault();let e=this._positioningEl.getBoundingClientRect(),{deltaY:n}=t,{ctrlKey:i,deltaMode:s}=t;1===s&&(n*=15);let r=1-n/(i?100:300);this._applyChange({scaleDiff:r,originX:t.clientX-e.left,originY:t.clientY-e.top,allowChangeEvent:!0})}_onPointerMove(t,e){if(!this._positioningEl)return;let n=this._positioningEl.getBoundingClientRect(),i=p(t[0],t[1]),s=p(e[0],e[1]),r=i.clientX-n.left,o=i.clientY-n.top,a=m(t[0],t[1]),h=m(e[0],e[1]);this._applyChange({originX:r,originY:o,scaleDiff:a?h/a:1,panX:s.clientX-i.clientX,panY:s.clientY-i.clientY,allowChangeEvent:!0})}_applyChange(t={}){let{panX:e=0,panY:n=0,originX:i=0,originY:s=0,scaleDiff:r=1,allowChangeEvent:o=!1}=t,a=f().translate(e,n).translate(i,s).translate(this.x,this.y).scale(r).translate(-i,-s).scale(this.scale);this.setTransform({allowChangeEvent:o,scale:a.a,x:a.e,y:a.f})}}function w(){let[t,e]=(0,r.useState)(1),[n,i]=(0,r.useState)("地図中の文字をクリックするとここに詳細が表示されます。"),[o,h]=(0,r.useState)(["...","...","...","...","..."]),l=(0,r.useRef)(null),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{Promise.all([...[1,2,3,4,5].map(t=>fetch("map/f".concat(t,".svg")).then(t=>t.text()))]).then(t=>h(t))},[]);let d=(0,r.useCallback)(t=>{var e;let n=t.target,s=n.id,r=s.startsWith("maps_")?s.substring(5):"tspan"===n.tagName&&(null==(e=n.parentElement)?void 0:e.id.startsWith("maps_"))?n.parentElement.id.substring(5):void 0;if(void 0!==r){let t=document.getElementById("maps_".concat(r));t&&(l.current&&(l.current.style.fill="#d5d5d5"),t.style.fill="#fffc4aff",l.current=t),i(r)}},[i]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:a().map_container,children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:a().button_block,children:[t,"階"]}),(0,s.jsx)("button",{className:"".concat(a().upButton," ").concat(a().button_block),onClick:()=>{if(5===t)throw Error("already top layer!");e(t+1)},disabled:5===t,children:"↑"}),(0,s.jsx)("button",{className:"".concat(a().downButton," ").concat(a().button_block),onClick:()=>{if(1===t)throw Error("already bottom layer!");e(t-1)},disabled:1===t,children:"↓"})]}),(0,s.jsxs)("div",{className:a().map,children:[(0,s.jsx)("pinch-zoom",{ref:c,dangerouslySetInnerHTML:{__html:o[t-1]},onClick:d,className:a().map_svg}),(0,s.jsx)("p",{className:a().map_ui,children:"ピンチアウトで拡大縮小できます"})]}),(0,s.jsx)("div",{className:a().detail_section,children:n})]})})}customElements.define("pinch-zoom",E)}}]);